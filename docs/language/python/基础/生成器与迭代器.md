## 一、迭代器

迭代：通过for循环遍历的动作

### 1. 可迭代对象

可以直接作用于 for 循环的对象统称为可迭代对象（Iterable）。内部含有`__iter__`方法。如字符串、列表、元组、字典、集合、文件句柄等

#### 1.1. 判断一个对象是否是可迭代对象

```python
>>> '__iter__' in dir('hello')
True
# 或者
>>> from collections import Iterable
>>> isinstance([], Iterable)
True
```

> 凡是可作用于 for 循环的对象都是 Iterable 类型

#### 1.2. 可迭代对象的特点

##### 1 优点

1. 存储的数据能直接显示，比较直观
2. 拥有的方法比较多，操作方便

##### 2 缺点

1. 占用内存
2. 不能直接通过for循环取值

### 2. 迭代器

可以被 next()函数调用并不断返回下一个值的对象称为迭代器（Iterator），内部含有`__iter__`方法和`__next__`方法的对象。

#### 2.1 判断一个对象是不是迭代器

```python
>>> from collections import Iterator
>>> isinstance((x for x in range(10)), Iterator)
True
>>> isinstance([], Iterator)
False
```

> 凡是可作用于 next()函数的对象都是 Iterator 类型,是一个惰性
>
> 计算的序列；

#### 2.2 可迭代对象转换为迭代器

```python
>>> s = 'hello'
>>> iter(s)
<str_iterator object at 0x000002157774D898>
```

## 二、生成器

生成器的本质是迭代器，

### 1. 生成器的获取方式

1. 生成器函数
2. 生成器表达式
3. python内部提供

### 2. 生成器函数

如果`def`定义的函数中有`yield`，这个函数就是生成器函数，不再是普通函数。生成器函数中可以有多个`yield`，一个`yield`对应一个`next`

```python
>>> def func():
...     yield 'hello'
...
>>> res = func()
>>> res
<generator object func at 0x00000215777449E8>
>>> next(res)
'hello'
```

```python
>>> def func():
...     l = [1,2,3]
...     yield l
...
>>> next(func())
[1, 2, 3]
# yield from 把列表变成迭代器
>>> def func():
...     l = [1,2,3]
...     yield from l
...
>>> next(func())
1
```

## 三、列表生成式（列表推导式）

- 循环模式 `[变量 for in iterable]`
- 筛选模式`[变量 for in iterable if 条件]`

## 四、生成器表达式

把列表生成式的[]改成()

```python
>>> (x * x for x in range(10))
<generator object <genexpr> at 0x0000021577744A98>
```
